<ion-content [ngClass]="{'default': !showFeedback(), 'success': showFeedback() && slideInfo[currentSlide].stage == Stage.CORRECT, 'failure': showFeedback() && slideInfo[currentSlide].stage == Stage.INCORRECT}">

  <ion-progress-bar style="margin-top: 0px" value={{progressPercent}}></ion-progress-bar>

  <div *ngIf="slideInfo[currentSlide].stage == Stage.START" (click)="startMemorizeTimer()" class="overlay" button>
    <div class="overlay-content">
      Click anywhere to reveal
    </div>
  </div>

  <ion-slides #slideElement (ionSlideWillChange)="changeSlide()">

    <ion-slide *ngFor="let slide of slideInfo; let slideIndex = index" (swipeleft)="selectFace(false)" (swiperight)="selectFace(true)" style="text-align: center; height: 100%; width: 100%; display: block">

      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.START">Memorize the face: {{memorizeTime}}</h3>
      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.MEMORIZE">Memorize the face: <span class="time-left">{{timeRemaining}}</span></h3>
      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.MASK">Hold the face in your mind...</h3>
      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.SELECT">Is this the same person?</h3>
      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.CORRECT">Correct!</h3>
      <h3 *ngIf="slideInfo[slideIndex].stage == Stage.INCORRECT">Incorrect!</h3>
      <ion-card class="swipe-card" *ngIf="slideInfo[slideIndex].stage != Stage.CORRECT && slideInfo[slideIndex].stage != Stage.INCORRECT">
        <ion-icon *ngIf="slideInfo[slideIndex].stage == Stage.SELECT" color="dark" name="arrow-back" style="display: inline-block; margin-bottom: 45%; margin-right: 3%; font-size: 150%"></ion-icon>
        <img *ngIf="slideInfo[slideIndex].stage != Stage.START" [src]="getSrc(slideIndex)" style="height: 270px; margin: 0 auto; display: inline-block; margin-top: 20px" [ngStyle]="{'width': slideInfo[slideIndex].stage == Stage.MASK ? '85%' : 'auto'}"/>
        <ion-icon *ngIf="slideInfo[slideIndex].stage == Stage.SELECT" color="dark" name="arrow-forward" style="display: inline-block; margin-bottom: 45%; margin-left: 3%; font-size: 150%"></ion-icon>
      </ion-card>

      <div *ngIf="slideInfo[slideIndex].stage == Stage.SELECT" class="swipe-footer">
        <ion-button style="width: 130px; color: white" (click)="selectFace(false)" color="secondary">Different</ion-button>
        <ion-button style="width: 130px; color: white" (click)="selectFace(true)" color="primary">Same</ion-button>
      </div>

      <div *ngIf="slideInfo[slideIndex].stage == Stage.CORRECT || slideInfo[slideIndex].stage == Stage.INCORRECT" style="height: 100%; width: 100%; padding-top: 20%; text-align: center; margin: 0 auto">
        <div *ngIf="slideInfo[slideIndex].correctFace == slideInfo[slideIndex].displayedFace" style="color: white">Same</div>
        <div *ngIf="slideInfo[slideIndex].correctFace != slideInfo[slideIndex].displayedFace" style="color: white">Different</div>
        <ion-card class="grid-card" style="--background: gainsboro;">
          <img [src]="slideInfo[slideIndex].correctFace" style="height: 95px; width: 70px; margin: 15px auto">
        </ion-card>
        <ion-card class="grid-card" style="--background: gainsboro;">
          <img [src]="slideInfo[slideIndex].displayedFace" style="height: 95px; width: 70px; margin: 15px auto">
        </ion-card>

        <ion-item class="footer" lines="none" style="margin-top: 30%">
          <ion-label>Swipe to Continue</ion-label>
          <ion-icon slot="end" color="dark" name="arrow-back" style="margin-top: 10px"></ion-icon>    
        </ion-item>
      </div>

    </ion-slide>

    <ion-slide>
      <app-score-page [score]="score" (finished)="finished.emit([score, $event])"></app-score-page>
    </ion-slide>

  </ion-slides>

</ion-content>
